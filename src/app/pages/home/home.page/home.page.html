<!-- htmlhint doctype-first:false -->
<section class="wizard" data-ui="page-home">
  <div uicard class="wizard__panel" variant="raised">
    <div class="wizard__panelhead">
      <img class="wizard__logo" src="/assets/svg/rosenbauer-logo.svg" alt="Rosenbauer Logo" />
      <div class="wizard__step">Schritt {{ stepNumber() }} von 3</div>
    </div>

    <app-progress-bar class="wizard__progress" [value]="stepProgress()" />

    <header class="wizard__header">
      @if (stepNumber() === 1) {
        <h2 class="wizard__title">Wähle zuerst den Fahrzeugtyp aus.</h2>
      } @else if (stepNumber() === 2) {
        <h2 class="wizard__title">Wähle jetzt das Fahrzeugmodell aus.</h2>
      } @else {
        <h2 class="wizard__title">Wähle jetzt die Prüfungsart aus.</h2>
      }
    </header>

    @if (selectedFamily() === null) {
      <div class="wizard__grid">
        @for (family of families; track family.id) {
          <button
            uicard
            class="wizard__card wizard__card--choice"
            type="button"
            (click)="selectFamily(family.id)"
          >
            <img class="wizard__image" [src]="family.imageSrc" [alt]="family.imageAlt" />
            <div class="wizard__cardtitle">{{ family.title }}</div>
          </button>
        }
      </div>
    } @else if (selectedModel() === null) {
      <div class="wizard__grid">
        @for (model of modelsByFamily[selectedFamily()!]; track model.id) {
          <button
            uicard
            class="wizard__card wizard__card--choice"
            type="button"
            (click)="selectModel(model)"
          >
            <img class="wizard__image" [src]="model.imageSrc" [alt]="model.imageAlt" />
            <div class="wizard__cardtitle">{{ model.title }}</div>
            @if (model.subtitle) {
              <div class="wizard__cardsubtitle">{{ model.subtitle }}</div>
            }
          </button>
        }
      </div>

      <div class="wizard__footer">
        <button uibutton kind="ghost" class="wizard__back" type="button" (click)="back()">Zurück</button>
      </div>
    } @else {
      <div class="wizard__grid wizard__grid--inspections">
        @for (inspection of inspections; track inspection.id) {
          <button
            uicard
            class="wizard__card wizard__card--choice"
            type="button"
            (click)="startChecklist(inspection.id)"
          >
            <img class="wizard__image" [src]="inspection.imageSrc" [alt]="inspection.imageAlt" />
            <div class="wizard__cardtitle">{{ inspection.title }}</div>
            <div class="wizard__cardsubtitle">{{ inspection.subtitle }}</div>
          </button>
        }
      </div>

      <div class="wizard__footer">
        <button uibutton kind="ghost" class="wizard__back" type="button" (click)="back()">Zurück</button>
      </div>
    }
  </div>
</section>
